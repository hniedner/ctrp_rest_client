{%- extends "base.html" %}

{% block title %}
Clinical Trial Search Results
{% endblock %}

{% block styles %}
{{super()}}
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.13/css/dataTables.bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.2.4/css/buttons.bootstrap.min.css">
{% endblock %}

{% block scripts %}
{{super()}}
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.13/js/dataTables.bootstrap.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.2.4/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.2.4/js/buttons.bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/2.5.0/jszip.min.js"></script>
    <script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/pdfmake.min.js"></script>
    <script src="https://cdn.rawgit.com/bpampuch/pdfmake/0.1.18/build/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.2.4/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.2.4/js/buttons.print.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/1.2.4/js/buttons.colVis.min.js"></script>

<script>
        $(document).ready(function() {

            var table = $('#datatable').DataTable( );
        } );


</script>
{% endblock %}

{% block content %}
<div class="container">
    <div>
        <h5>Search params</h5>
        <table class="table">
            {% for key in search_params %}
            <tr>

                <th>{{ key }}</th>
                <td>
                    {% if key == "include" %}
                    {{ ", ".join(search_params[key]) }}
                    {% else %}
                    {{ search_params[key] }}
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
    <br/>
    <br/>
    <table id="datatable" class="table table-striped table-bordered" cellspacing="0" width="100%">
        <thead>
        <tr>
            <th>NCI ID</th>
            <th>NCT ID</th>
            <th>Phase</th>
            <th>Start Date</th>
            <th>Current Status</th>
            <th>Official Title</th>
        </tr>
        </thead>
        <tfoot>
        <tr>
            <th>NCI ID</th>
            <th>NCT ID</th>
            <th>Phase</th>
            <th>Start Date</th>
            <th>Current Status</th>
            <th>Official Title</th>
        </tr>
        </tfoot>
        <tbody>
        {% for row in result.data %}
        <tr>
            <td><a href="{{ url_for('display_trial', trial_id=row.nci_id) }}">{{ row.nci_id }}</a> </td>
            <td>{{ row.nct_id }}</td>
            <td>{{ row.phase.phase }}</td>
            <td>{{ row.start_date }}</td>
            <td>{{ row.current_trial_status }}</td>
            <td>{{ row.official_title }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}